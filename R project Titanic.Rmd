---
title: "R Notebook"
output: html_notebook
---
ANALYSING THE TITANIC DATASET
I will be using the titanic_train_dataset

```{r}
library(readr)
library(dplyr)
library(ggplot2)
#library(tidyverse)
#library(tidyr)

```


```{r}
file_path <- "titanic train dataset.csv"
titanic_df <- read_csv(file_path)
View(titanic_df)
```
I see that my data is mising a lot of values

```{r}
titanic_df_fill <- titanic_df[complete.cases(titanic_df), ]

print(titanic_df_fill)

cols <-  setdiff(names(titanic_df), "Age")
titanic_df[cols] <- lapply(titanic_df[cols], function(x) ifelse(is.na(x), 'N/A', x))

titanic_df$Age[is.na(titanic_df$Age)] <- 0

View(titanic_df)
```
Brief description of data
```{r}
print("Summary of titanic_df:")
summary(titanic_df)

```
What is the age distribution in this data?
```{r}
ggplot(titanic_df, aes(x = Age)) +
  geom_histogram(binwidth = 5, fill = "blue", color = "black") +
  labs(title = "Age Distribution of Passengers", x = "Age", y = "Frequency")

```
mean age 

```{r}
mean_age <- mean(titanic_df$Age[titanic_df$Age > 0])

print(paste("Mean Age (excluding Zeros): ", mean_age))
```

ANALYSIS:
There were a lot more people who did not have their ages represented in the file.This is represented by the tallest bar in the graph.
The ages range from 5 to 80 years. There were more people between the ages of 20 and 40.The average age is 29.7.  We can also see that as the age increases, the frequency decreases, indicating fewer older passengers on board.


What is the correlation between age and survival:
Using the stored func correlation tests, we will be able to see whether age influenced survival.

```{r}
age_and_survival <- cor.test(titanic_df$Age, titanic_df$Survived, use = "complete.obs")

age_and_survival
```
ANALYSIS
Here we find that the correlation co-efficient is 0.01053922, which is very close to 0. This indicates a very weak linear relationship between age and survival.

Secondly, we also find that the p-value is 0.7534, which is greater than the typical significance level of 0.05. This will mean that we fail to reject the null hypothesis that the true correlation is equal to 0. In other words, the results do not provide strong evidence of a significant correlation between age and survival. 

Hence, with the 95 percent confidence interval ranges from -0.05517638 to 0.07616390, we can say that there is no significant relationship between age and survival. People who survived could have been very young, or old.


With that, was there a relation between the passenger's age and passenger class?

```{r}
relation_passenger_v_class <- cor.test(titanic_df$Age, titanic_df$Pclass, use = "complete.obs")

relation_passenger_v_class

```

But then what was the average age of male and female passengers

```{r}
# Filter out "N/A" values
# then Convert Age column to numeric
#calc the mean age

titanic_df_male <- titanic_df[titanic_df$Sex == "male" & titanic_df$Age != "N/A", ]
titanic_df_female <- titanic_df[titanic_df$Sex == "female" & titanic_df$Age != "N/A", ]

#to num
titanic_df_male$Age <- as.numeric(titanic_df_male$Age)
titanic_df_female$Age <- as.numeric(titanic_df_female$Age)

# Calculate the mean age
average_age_male <- mean(titanic_df_male$Age)
average_age_female <- mean(titanic_df_female$Age)

# Print the mean age
print(paste("Average Age of Male Passengers: ", average_age_male))
print(paste("Average Age of Female Passengers: ", average_age_female))


```
Did family size influence survival?

Let's test some hypothesis

Calculate the number of passengers traveling alone versus with family

```{r}
# Create a new column 'Family_size'
#then 

titanic_df$Family_size <- titanic_df$SibSp + titanic_df$Parch

# Calculate the number of passengers traveling alone and with family
num_alone <- sum(titanic_df$Family_size == 0)
num_with_family <- sum(titanic_df$Family_size > 0)

print(paste("Number of Passengers Traveling Alone: ", num_alone))
print(paste("Number of Passengers Traveling with Family: ", num_with_family))
```
Analysis: Here we find that there were 183 more passengers travelling alone than with family.